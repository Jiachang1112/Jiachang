<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•™å­¸è³‡æºåº«</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* --- åŸºç¤è¨­å®š --- */
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f5f7fa; margin: 0; padding: 40px 20px; color: #333; }
        .container { max-width: 900px; margin: 0 auto; background: #fff; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); overflow: hidden; min-height: 500px; display: flex; flex-direction: column; }
        
        /* --- é ‚éƒ¨å°èˆªå€ --- */
        .header-bar { background: #fff; padding: 20px 30px; border-bottom: 1px solid #eee; display: flex; align-items: center; justify-content: space-between; }
        .brand { font-size: 20px; font-weight: 700; color: #2c3e50; display: flex; align-items: center; }
        .brand span { margin-right: 10px; font-size: 24px; }
        
        /* --- è·¯å¾‘åˆ— (Breadcrumb) & å·¥å…·åˆ— --- */
        .nav-bar { background: #f8f9fa; padding: 12px 30px; border-bottom: 1px solid #eee; display: flex; align-items: center; font-size: 14px; color: #666; }
        .breadcrumb { display: flex; align-items: center; flex-grow: 1; overflow-x: auto; white-space: nowrap; }
        .breadcrumb-item { cursor: pointer; color: #0366d6; font-weight: 500; transition: 0.2s; }
        .breadcrumb-item:hover { text-decoration: underline; color: #024ea2; }
        .breadcrumb-separator { margin: 0 8px; color: #aaa; }
        .breadcrumb-current { color: #333; font-weight: bold; cursor: default; }
        
        .back-btn { 
            background: white; border: 1px solid #ddd; padding: 6px 12px; border-radius: 6px; 
            cursor: pointer; font-size: 13px; margin-right: 15px; display: flex; align-items: center; transition: 0.2s; color: #555;
        }
        .back-btn:hover { background: #eee; border-color: #ccc; }
        .back-btn svg { width: 14px; height: 14px; margin-right: 5px; fill: currentColor; }
        .back-btn.hidden { display: none; }

        /* --- åˆ—è¡¨å€åŸŸ --- */
        #list-root { padding: 10px 0; flex-grow: 1; }
        
        /* åˆ—è¡¨é …ç›® (å…±ç”¨æ¨£å¼) */
        .list-item { 
            display: flex; align-items: center; padding: 16px 30px; 
            border-bottom: 1px solid #f0f0f0; cursor: pointer; transition: all 0.2s; 
        }
        .list-item:hover { background-color: #f0f7ff; padding-left: 35px; } /* Hoveræ™‚ç¨å¾®å³ç§» */
        .list-item:last-child { border-bottom: none; }

        .item-icon { font-size: 28px; margin-right: 20px; min-width: 40px; text-align: center; }
        .item-info { flex-grow: 1; }
        .item-name { font-size: 16px; font-weight: 600; color: #333; margin-bottom: 4px; }
        .item-note { font-size: 13px; color: #888; }
        .item-arrow { color: #ccc; font-size: 14px; }

        /* è³‡æ–™å¤¾å°ˆç”¨ */
        .folder-item .item-icon { color: #f39c12; } /* è³‡æ–™å¤¾é»ƒè‰² */
        
        /* æª”æ¡ˆå°ˆç”¨ */
        .file-item .item-icon { color: #3498db; }
        .file-item:hover .item-name { color: #0366d6; }

        /* --- ç™»å…¥ç•«é¢ (ç¶­æŒåŸæœ¬è¨­è¨ˆ) --- */
        #login-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #f5f7fa; z-index: 9999; display: flex; justify-content: center; align-items: center; flex-direction: column; }
        .login-box { background: white; padding: 40px; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); text-align: center; max-width: 360px; width: 90%; }
        input[type="password"] { padding: 12px; font-size: 16px; border: 2px solid #eee; border-radius: 8px; margin-top: 20px; width: 80%; transition: border-color 0.3s; text-align: center;}
        input[type="password"]:focus { border-color: #3498db; outline: none; }
        button.login-btn { padding: 12px 40px; font-size: 16px; background-color: #3498db; color: white; border: none; border-radius: 8px; cursor: pointer; margin-top: 20px; font-weight: bold; transition: background-color 0.3s; width: 100%; }
        button.login-btn:hover { background-color: #2980b9; }
        #error-msg { color: #e74c3c; margin-top: 15px; display: none; font-weight: bold; font-size: 14px; }
        #content { display: none; height: 100%; }
    </style>
</head>
<body>

    <div id="login-overlay">
        <div class="login-box">
            <h2 style="color: #2c3e50; margin-top: 0;">ğŸ”’ èº«ä»½é©—è­‰</h2>
            <p style="color: #666; font-size: 14px;">è«‹è¼¸å…¥é€šé—œå¯†èªä»¥å­˜å–æ•™æ</p>
            <input type="password" id="passwordInput" placeholder="Password">
            <br>
            <button class="login-btn" onclick="checkPassword()">é€²å…¥ç³»çµ±</button>
            <p id="error-msg">å¯†ç¢¼éŒ¯èª¤</p>
        </div>
    </div>

    <div id="content">
        <div class="container">
            <div class="header-bar">
                <div class="brand">
                    <span>ğŸ“‚</span> <div id="page-title">æ•™å­¸è³‡æºåº«</div>
                </div>
            </div>

            <div class="nav-bar">
                <button id="backBtn" class="back-btn hidden" onclick="goUp()">
                    <svg viewBox="0 0 24 24"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
                    è¿”å›
                </button>
                <div class="breadcrumb" id="breadcrumb-container">
                    </div>
            </div>

            <div id="list-root">
                </div>
        </div>
    </div>

    <script src="config.js"></script>

    <script>
        // --- åˆå§‹åŒ–è¨­å®š ---
        document.title = CONFIG.pageTitle;
        document.getElementById("page-title").innerText = CONFIG.pageTitle;

        // --- ç‹€æ…‹ç®¡ç† ---
        // æˆ‘å€‘ç”¨ä¸€å€‹ Array ä¾†è¨˜éŒ„ç¾åœ¨çš„è·¯å¾‘ Stack
        // è£¡é¢æ”¾çš„æ˜¯è³‡æ–™å¤¾ç‰©ä»¶ï¼Œç©ºé™£åˆ—ä»£è¡¨åœ¨ã€Œé¦–é ã€
        let pathStack = [];

        // å•Ÿå‹•
        renderList(CONFIG.items);
        updateBreadcrumb();

        // --- æ ¸å¿ƒåŠŸèƒ½ï¼šæ¸²æŸ“åˆ—è¡¨ ---
        function renderList(items) {
            const container = document.getElementById("list-root");
            container.innerHTML = ""; // æ¸…ç©ºç•«é¢

            if (!items || items.length === 0) {
                container.innerHTML = '<div style="text-align:center; padding:40px; color:#999;">(æ­¤è³‡æ–™å¤¾æ˜¯ç©ºçš„)</div>';
                return;
            }

            items.forEach(item => {
                const div = document.createElement("div");
                
                if (item.type === 'folder') {
                    // --- æ¸²æŸ“è³‡æ–™å¤¾ ---
                    div.className = "list-item folder-item";
                    div.innerHTML = `
                        <div class="item-icon">ğŸ“</div>
                        <div class="item-info">
                            <div class="item-name">${item.name}</div>
                            <div class="item-note">${item.children ? item.children.length + ' å€‹é …ç›®' : 'ç©ºè³‡æ–™å¤¾'}</div>
                        </div>
                        <div class="item-arrow">â¤</div>
                    `;
                    // é»æ“Šè³‡æ–™å¤¾ï¼šé€²å…¥ä¸‹ä¸€å±¤
                    div.onclick = () => enterFolder(item);

                } else {
                    // --- æ¸²æŸ“æª”æ¡ˆ ---
                    // åˆ¤æ–·åœ–ç¤º
                    let icon = item.icon || 'ğŸ“„'; 
                    div.className = "list-item file-item";
                    div.innerHTML = `
                        <div class="item-icon">${icon}</div>
                        <div class="item-info">
                            <div class="item-name">${item.name}</div>
                            <div class="item-note">${item.note || ''}</div>
                        </div>
                    `;
                    // é»æ“Šæª”æ¡ˆï¼šé–‹å•Ÿé€£çµ
                    div.onclick = () => window.open(item.path, '_blank');
                }
                container.appendChild(div);
            });
        }

        // --- åŠŸèƒ½ï¼šé€²å…¥è³‡æ–™å¤¾ ---
        function enterFolder(folderItem) {
            pathStack.push(folderItem); // æŠŠé€™å€‹è³‡æ–™å¤¾åŠ å…¥è·¯å¾‘ç´€éŒ„
            renderList(folderItem.children); // é‡æ–°æ¸²æŸ“ç•«é¢ï¼Œåªé¡¯ç¤ºé€™å€‹è³‡æ–™å¤¾çš„å…§å®¹
            updateBreadcrumb(); // æ›´æ–°ä¸Šæ–¹è·¯å¾‘åˆ—
        }

        // --- åŠŸèƒ½ï¼šè¿”å›ä¸Šä¸€å±¤ ---
        function goUp() {
            if (pathStack.length > 0) {
                pathStack.pop(); // ç§»é™¤æœ€å¾Œä¸€å€‹è·¯å¾‘
                
                // åˆ¤æ–·ç¾åœ¨è¦é¡¯ç¤ºä»€éº¼
                if (pathStack.length === 0) {
                    renderList(CONFIG.items); // å›åˆ°é¦–é 
                } else {
                    const currentFolder = pathStack[pathStack.length - 1];
                    renderList(currentFolder.children);
                }
                updateBreadcrumb();
            }
        }

        // --- åŠŸèƒ½ï¼šè·³è½‰åˆ°ç‰¹å®šå±¤ç´š (é»æ“ŠéºµåŒ…å±‘æ™‚ç”¨) ---
        function jumpTo(index) {
            // å¦‚æœ index æ˜¯ -1ï¼Œä»£è¡¨å›åˆ°é¦–é 
            if (index === -1) {
                pathStack = [];
                renderList(CONFIG.items);
            } else {
                // ä¿ç•™ index ä¹‹å‰çš„è·¯å¾‘ï¼Œåˆ‡æ‰å¾Œé¢çš„
                pathStack = pathStack.slice(0, index + 1);
                const currentFolder = pathStack[pathStack.length - 1];
                renderList(currentFolder.children);
            }
            updateBreadcrumb();
        }

        // --- åŠŸèƒ½ï¼šæ›´æ–°è·¯å¾‘åˆ— (Breadcrumb) ---
        function updateBreadcrumb() {
            const bcContainer = document.getElementById("breadcrumb-container");
            const backBtn = document.getElementById("backBtn");
            
            // 1. è™•ç†è¿”å›æŒ‰éˆ•é¡¯ç¤º
            if (pathStack.length > 0) {
                backBtn.classList.remove("hidden");
            } else {
                backBtn.classList.add("hidden");
            }

            // 2. ç”¢ç”Ÿè·¯å¾‘ HTML
            let html = `<span class="breadcrumb-item" onclick="jumpTo(-1)">é¦–é </span>`;
            
            pathStack.forEach((folder, index) => {
                html += `<span class="breadcrumb-separator">/</span>`;
                
                // å¦‚æœæ˜¯æœ€å¾Œä¸€å€‹ï¼ˆç•¶å‰ä½ç½®ï¼‰ï¼Œå°±ä¸èƒ½é»æ“Šï¼Œå­—é«”åŠ ç²—
                if (index === pathStack.length - 1) {
                    html += `<span class="breadcrumb-current">${folder.name}</span>`;
                } else {
                    html += `<span class="breadcrumb-item" onclick="jumpTo(${index})">${folder.name}</span>`;
                }
            });

            bcContainer.innerHTML = html;
        }

        // --- å¯†ç¢¼é–å®šåŠŸèƒ½ ---
        function checkPassword() {
            var input = document.getElementById("passwordInput").value;
            if (input === CONFIG.password) {
                document.getElementById("login-overlay").style.display = "none";
                document.getElementById("content").style.display = "block";
            } else {
                document.getElementById("error-msg").style.display = "block";
                document.getElementById("passwordInput").value = "";
            }
        }
        document.getElementById("passwordInput").addEventListener("keypress", function(event) {
            if (event.key === "Enter") checkPassword();
        });

    </script>
</body>
</html>
